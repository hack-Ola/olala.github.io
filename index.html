<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ù…Ø±Ø© ØºØ¶Ù‰</title>

<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:#f5f5f5;
    text-align:center;
}

h1{
    margin-top:20px;
    font-weight:600;
    letter-spacing:1px;
}

.controls{
    margin:20px;
}

button{
    padding:10px 20px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:linear-gradient(45deg,#c9a227,#f5d76e);
    font-weight:bold;
    color:#1a1a1a;
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

#game-board{
    display:grid;
    gap:18px;
    justify-content:center;
    margin:25px auto;
    max-width:700px;
}

/* Ø§Ù„ÙƒØ±Øª */
.card{
    width:140px;
    height:190px;
    perspective:1000px;
}

.card-inner{
    width:100%;
    height:100%;
    position:relative;
    transform-style: preserve-3d;
    transition: transform 0.6s;
}

.card.flipped .card-inner{
    transform: rotateY(180deg);
}

.card-front, .card-back{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:16px;
    backface-visibility:hidden;
    box-shadow:0 8px 20px rgba(0,0,0,0.4);
}

/* Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ */
.card-front{
    background:linear-gradient(145deg,#ffffff,#f1f1f1);
    border:3px solid #d4af37;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    position:relative;
}

/* ØªØ§Ø¬ */
.card-front::before{
    content:"ğŸ‘‘";
    font-size:22px;
    position:absolute;
    top:10px;
}

/* Ø§Ø³Ù… Ola */
.card-front span{
    font-size:30px;
    font-weight:bold;
    color:#1c2b36;
    letter-spacing:1px;
}

/* Ø§Ù„Ø®Ù„Ù */
.card-back{
    transform: rotateY(180deg);
    background:linear-gradient(145deg,#1c2b36,#2e4a5a);
    border:3px solid #d4af37;
    display:flex;
    align-items:center;
    justify-content:center;
}

/* Ù‚Ù„Ø¨ Ø®Ù„ÙÙŠ Ø²Ø®Ø±ÙÙŠ */
.card-back::before{
    content:"â™¥";
    font-size:60px;
    color:rgba(255,255,255,0.08);
    position:absolute;
}

.card-back img{
    width:85%;
    height:85%;
    object-fit:cover;
    border-radius:12px;
    z-index:2;
}

#scoreboard{
    margin-top:10px;
    font-size:18px;
}
</style>
</head>

<body>

<h1>ğŸƒ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© - Ø¬Ù…Ø±Ø© ØºØ¶Ù‰</h1>

<div class="controls">
Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:
<input type="number" id="playersCount" value="2" min="1" max="6">

Ø§Ù„Ù…Ø³ØªÙˆÙ‰:
<select id="difficulty">
<option value="8">Ø³Ù‡Ù„ (8)</option>
<option value="12">Ù…ØªÙˆØ³Ø· (12)</option>
<option value="16">ØµØ¹Ø¨ (16)</option>
</select>

<button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
</div>

<div id="scoreboard"></div>
<h3 id="turn"></h3>

<div id="game-board"></div>

<script>

let players=[];
let currentPlayer=0;
let flippedCards=[];
let matchedPairs=0;
let totalPairs=8;

const images=[
"https://picsum.photos/300?1",
"https://picsum.photos/300?2",
"https://picsum.photos/300?3",
"https://picsum.photos/300?4",
"https://picsum.photos/300?5",
"https://picsum.photos/300?6",
"https://picsum.photos/300?7",
"https://picsum.photos/300?8",
"https://picsum.photos/300?9",
"https://picsum.photos/300?10",
"https://picsum.photos/300?11",
"https://picsum.photos/300?12",
"https://picsum.photos/300?13",
"https://picsum.photos/300?14",
"https://picsum.photos/300?15",
"https://picsum.photos/300?16"
];

function startGame(){
    const count=parseInt(document.getElementById("playersCount").value);
    totalPairs=parseInt(document.getElementById("difficulty").value);

    players=[];
    for(let i=0;i<count;i++){
        players.push({score:0});
    }

    currentPlayer=0;
    matchedPairs=0;
    flippedCards=[];
    createBoard();
    updateScore();
}

function createBoard(){
    const board=document.getElementById("game-board");
    board.innerHTML="";
    board.style.gridTemplateColumns=`repeat(${Math.ceil(Math.sqrt(totalPairs*2))}, 1fr)`;

    let selected=images.slice(0,totalPairs);
    let cards=[...selected,...selected];
    cards.sort(()=>0.5-Math.random());

    cards.forEach(img=>{
        const card=document.createElement("div");
        card.className="card";
        card.dataset.value=img;

        card.innerHTML=`
        <div class="card-inner">
            <div class="card-front">
                <span>Ola</span>
            </div>
            <div class="card-back">
                <img src="${img}">
            </div>
        </div>`;

        card.onclick=()=>flipCard(card);
        board.appendChild(card);
    });
}

function flipCard(card){
    if(flippedCards.length<2 && !card.classList.contains("flipped")){
        card.classList.add("flipped");
        flippedCards.push(card);
    }

    if(flippedCards.length===2){
        setTimeout(checkMatch,800);
    }
}

function checkMatch(){
    const [c1,c2]=flippedCards;

    if(c1.dataset.value===c2.dataset.value){
        players[currentPlayer].score++;
        matchedPairs++;
    }else{
        c1.classList.remove("flipped");
        c2.classList.remove("flipped");
        currentPlayer=(currentPlayer+1)%players.length;
    }

    flippedCards=[];
    updateScore();

    if(matchedPairs===totalPairs){
        endGame();
    }
}

function updateScore(){
    let html="";
    players.forEach((p,i)=>{
        html+=`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i+1}: ${p.score} | `;
    });
    document.getElementById("scoreboard").innerHTML=html;
    document.getElementById("turn").innerText="Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ "+(currentPlayer+1);
}

function endGame(){
    let max=Math.max(...players.map(p=>p.score));
    let winner=players.findIndex(p=>p.score===max);
    alert("ğŸ† Ø§Ù„ÙØ§Ø¦Ø² Ø§Ù„Ù„Ø§Ø¹Ø¨ "+(winner+1));
}

</script>

</body>
</html>