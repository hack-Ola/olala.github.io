<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ola Cards - Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI', Arial;
    background: linear-gradient(135deg,#1e3c72,#2a5298);
    color:white;
    text-align:center;
}

h1{
    margin:25px 0;
    font-size:28px;
    font-weight:600;
    letter-spacing:1px;
}

.controls{
    margin:15px;
}

button{
    padding:10px 18px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#ffcc00;
    font-weight:bold;
}

/* Ø§Ù„Ø´Ø¨ÙƒØ© */
#game-board{
    display:grid;
    gap:18px;
    padding:20px;
    max-width:1000px;
    margin:auto;
}

/* ğŸ“± Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media (max-width:768px){
    #game-board{
        grid-template-columns:repeat(3,1fr);
    }
}

/* ğŸ’» ØªØ§Ø¨Ù„Øª */
@media (min-width:769px) and (max-width:1024px){
    #game-board{
        grid-template-columns:repeat(4,1fr);
    }
}

/* ğŸ–¥ Ø´Ø§Ø´Ø© ÙƒØ¨ÙŠØ±Ø© */
@media (min-width:1025px){
    #game-board{
        grid-template-columns:repeat(5,1fr);
    }
}

/* Ø§Ù„ÙƒØ±Øª */
.card{
    width:100%;
    aspect-ratio:3/4;
    perspective:1500px;
    cursor:pointer;
}

.card-inner{
    width:100%;
    height:100%;
    position:relative;
    transform-style:preserve-3d;
    transition:transform 0.9s cubic-bezier(.4,.2,.2,1);
}

.card.flipped .card-inner{
    transform:rotateY(180deg);
}

.card-front,
.card-back{
    position:absolute;
    width:100%;
    height:100%;
    backface-visibility:hidden;
    border-radius:16px;
    overflow:hidden;
    box-shadow:0 15px 35px rgba(0,0,0,0.4);
}

/* Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ */
.card-front{
    background:linear-gradient(145deg,#ffd84d,#ffcc00);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:24px;
    font-weight:800;
    color:#333;
}

/* Ø§Ù„Ø®Ù„Ù */
.card-back{
    transform:rotateY(180deg);
    background:white;
}

.card-back img{
    width:100%;
    height:100%;
    object-fit:cover;
}

#scoreboard{
    margin-top:10px;
    font-size:18px;
}
</style>
</head>

<body>

<h1>ğŸ® Ola Cards</h1>

<div class="controls">
Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:
<input type="number" id="playersCount" value="2" min="1" max="6">

Ø§Ù„Ù…Ø³ØªÙˆÙ‰:
<select id="difficulty">
<option value="6">Ø³Ù‡Ù„</option>
<option value="8">Ù…ØªÙˆØ³Ø·</option>
<option value="10">ØµØ¹Ø¨</option>
<option value="12">Ù…ØªÙ‚Ø¯Ù…</option>
</select>

<button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
</div>

<div id="scoreboard"></div>
<h3 id="turn"></h3>

<div id="game-board"></div>

<!-- ğŸ”Š ØµÙˆØª Ø§Ù„Ù‚Ù„Ø¨ -->
<audio id="flipSound" preload="auto">
<source src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3" type="audio/mpeg">
</audio>

<script>

let players=[];
let currentPlayer=0;
let flippedCards=[];
let matchedPairs=0;
let totalPairs=6;

/* ØµÙˆØ± Ø«Ø§Ø¨ØªØ© */
const images=[
"https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=400",
"https://images.unsplash.com/photo-1491553895911-0055eca6402d?w=400",
"https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?w=400",
"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=400",
"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400",
"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=400",
"https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=400",
"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=400",
"https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=400",
"https://images.unsplash.com/photo-1526481280691-7819c8d9f3e6?w=400",
"https://images.unsplash.com/photo-1482192505345-5655af888cc4?w=400",
"https://images.unsplash.com/photo-1499856871958-5b9627545d1a?w=400"
];

function startGame(){
    const count=parseInt(document.getElementById("playersCount").value);
    totalPairs=parseInt(document.getElementById("difficulty").value);

    players=[];
    for(let i=0;i<count;i++){
        players.push({score:0});
    }

    currentPlayer=0;
    matchedPairs=0;
    flippedCards=[];
    createBoard();
    updateScore();
}

function createBoard(){
    const board=document.getElementById("game-board");
    board.innerHTML="";

    let selected=images.slice(0,totalPairs);
    let cards=[...selected,...selected];
    cards.sort(()=>0.5-Math.random());

    cards.forEach(img=>{
        const card=document.createElement("div");
        card.className="card";
        card.dataset.value=img;

        card.innerHTML=`
        <div class="card-inner">
            <div class="card-front">Ola</div>
            <div class="card-back">
                <img src="${img}">
            </div>
        </div>`;

        card.onclick=()=>flipCard(card);
        board.appendChild(card);
    });
}

function flipCard(card){
    if(flippedCards.length<2 && !card.classList.contains("flipped")){
        card.classList.add("flipped");

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        const sound = document.getElementById("flipSound");
        sound.currentTime = 0;
        sound.play();

        flippedCards.push(card);
    }

    if(flippedCards.length===2){
        setTimeout(checkMatch,900);
    }
}

function checkMatch(){
    const [c1,c2]=flippedCards;

    if(c1.dataset.value===c2.dataset.value){
        players[currentPlayer].score++;
        matchedPairs++;
    }else{
        c1.classList.remove("flipped");
        c2.classList.remove("flipped");
        currentPlayer=(currentPlayer+1)%players.length;
    }

    flippedCards=[];
    updateScore();

    if(matchedPairs===totalPairs){
        endGame();
    }
}

function updateScore(){
    let html="";
    players.forEach((p,i)=>{
        html+=`Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i+1}: ${p.score} | `;
    });
    document.getElementById("scoreboard").innerHTML=html;
    document.getElementById("turn").innerText="Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ "+(currentPlayer+1);
}

function endGame(){
    let max=Math.max(...players.map(p=>p.score));
    let winner=players.findIndex(p=>p.score===max);
    alert("ğŸ† Ø§Ù„ÙØ§Ø¦Ø² "+(winner+1));
}

</script>
</body>
</html>
